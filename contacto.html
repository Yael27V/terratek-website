<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contacto ‚Äî Terratek Solutions</title>
  <meta name="description" content="Cont√°ctanos para cotizaciones y programaci√≥n de servicios con dron agr√≠cola." />
  <link rel="icon" href="assets/img/logo_terratek_circulo.png" sizes="32x32" />
  <link rel="apple-touch-icon" href="assets/img/logo_terratek_circulo.png" />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <!-- WhatsApp Floating Button -->
  <a href="https://wa.me/5219602383601" target="_blank" class="whatsapp-floating" aria-label="Contactar por WhatsApp">
    <img src="assets/img/social/logo_whats_flotante.png" alt="WhatsApp" />
  </a>
  
  <header role="banner">
    <div class="container nav">
      <a href="index.html" class="brand" aria-label="Terratek Solutions">
        <div class="logo-container">
          <img src="assets/img/logo-fondo.png" alt="Terratek Solutions Logo" class="logo-text" />
          <img src="assets/img/logo_terratek_circulo.png" alt="Terratek Solutions Logo Circular" class="logo-circle" />
        </div>
      </a>
      <button class="menu-btn" id="menuToggle" aria-expanded="false" aria-controls="siteNav">‚ò∞</button>
      <nav id="siteNav">
        <a href="index.html">Inicio</a>
        <a href="quienes-somos.html">Qui√©nes somos</a>
        <a href="servicios.html">Servicios</a>
        <a href="contacto.html">Contacto</a>
      </nav>
    </div>
  </header>

  <section class="contact-hero">
    <div class="hero-pattern"></div>
    <div class="container">
      <div class="hero-content">
        <h1>Contacto</h1>
        <p class="hero-text">Estamos listos para atenderte y llevar la tecnolog√≠a al campo.</p>
        <div class="hero-features">
          <div class="feature">
            <span class="feature-icon">‚ö°</span>
            <span>Respuesta r√°pida</span>
          </div>
          <div class="feature">
            <span class="feature-icon">üéØ</span>
            <span>Soluciones precisas</span>
          </div>
          <div class="feature">
            <span class="feature-icon">üí™</span>
            <span>Soporte experto</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <main class="section">
    <div class="container contact-container">
      <div class="contact-form-card">
        <div class="form-header">
          <div class="icon-circle">
            <span class="icon">üì®</span>
          </div>
          <h2>Env√≠anos un mensaje</h2>
          <p class="form-subtitle">Cu√©ntanos sobre tu proyecto y te responderemos pronto</p>
        </div>

        <div id="form-messages"></div>
        
        <form id="contact-form" action="https://formspree.io/f/mgvnkzgv" method="POST">
          <!-- Campo oculto para evitar spam -->
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_next" value="https://terrateksolutions.com.mx/contacto.html#form-success">
          
          <div class="form-group">
            <label for="name">Nombre completo *</label>
            <input type="text" id="name" name="name" required>
          </div>
          
          <div class="form-group">
            <label for="email">Correo electr√≥nico *</label>
            <input type="email" id="email" name="email" required>
          </div>
          
          <div class="form-group">
            <label for="phone">Tel√©fono</label>
            <input type="tel" id="phone" name="phone">
          </div>
          
          <div class="form-group">
            <label for="service">Servicio de inter√©s</label>
            <select id="service" name="service">
              <option value="">Selecciona un servicio</option>
              <option value="fumigacion">Fumigaci√≥n con Drones</option>
              <option value="fertilizacion">Fertilizaci√≥n de Precisi√≥n</option>
              <option value="monitoreo">Monitoreo de Cultivos</option>
              <option value="consultoria">Consultor√≠a Agr√≠cola</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="hectares">Hect√°reas aproximadas</label>
            <input type="number" id="hectares" name="hectares" min="1" placeholder="Ej: 50">
          </div>
          
          <div class="form-group">
            <label for="message">Mensaje *</label>
            <textarea id="message" name="message" rows="5" required placeholder="Cu√©ntanos sobre tu proyecto agr√≠cola..."></textarea>
          </div>
          
          <button type="submit" class="btn-primary" id="submit-btn">
            <span id="btn-text">Enviar Mensaje</span>
            <span id="btn-loading" style="display: none;">Enviando...</span>
          </button>
        </form>
        
        <div class="contact-methods-alt" style="margin-top: 30px; text-align: center; padding: 20px; background: var(--bg); border-radius: var(--radius);">
          <p style="margin-bottom: 15px; color: var(--green-dark);">O cont√°ctanos directamente:</p>
          <div class="contact-links" style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
            <a href="https://wa.me/5219602383601?text=Hola,%20me%20interesa%20conocer%20m√°s%20sobre%20sus%20servicios%20de%20drones%20agr√≠colas" target="_blank" class="btn btn-outline" style="text-decoration: none;">
              <img src="assets/img/social/whatsapp-white.svg" alt="WhatsApp" style="width: 16px; height: 16px; margin-right: 5px;"> WhatsApp
            </a>
            <a href="mailto:terrateksolutions71@gmail.com" class="btn btn-outline" style="text-decoration: none;">
              ‚úâ Email
            </a>
            <a href="tel:+5219602383601" class="btn btn-outline" style="text-decoration: none;">
              üìû Tel√©fono
            </a>
          </div>
        </div>
      </div>

      <aside class="contact-info-card">
        <div class="info-header">
          <div class="icon-circle">
            <span class="icon">üìç</span>
          </div>
          <h2>Datos de contacto</h2>
          <p class="info-subtitle">Estamos aqu√≠ para ayudarte</p>
        </div>

        <div class="contact-info-list">
          <div class="info-item">
            <span class="info-icon">üìç</span>
            <div>
              <strong>Ubicaci√≥n</strong>
              <p>Carr. a Puerto Estero, 70146 San Francisco del Mar Pueblo Nuevo, Oax.</p>
            </div>
          </div>

          <div class="info-item">
            <span class="info-icon">üìû</span>
            <div>
              <strong>Tel√©fono</strong>
              <p><a href="tel:+5219602383601">+52 1 960 238 3601</a></p>
            </div>
          </div>

          <div class="info-item">
            <span class="info-icon">‚úâÔ∏è</span>
            <div>
              <strong>Correo</strong>
              <p><a href="mailto:terrateksolutions71@gmail.com">terrateksolutions71@gmail.com</a></p>
            </div>
          </div>
        </div>

    <!-- Redes sociales -->
    <div class="social-links footer-social">
      <a href="https://wa.me/5219602383601" target="_blank" rel="noopener" aria-label="WhatsApp">
        <img src="assets/img/social/whatsapp-white.svg" alt="WhatsApp">
      </a>
      <a href="https://www.facebook.com/share/1QJ1JJ6bkf/?mibextid=wwXIfr" target="_blank" rel="noopener" aria-label="Facebook">
        <img src="assets/img/social/facebook-white.svg" alt="Facebook">
      </a>
      <a href="https://www.instagram.com/terrateksolutions71?igsh=dXluZnRrdGkwY2tk" target="_blank" rel="noopener" aria-label="Instagram">
        <img src="assets/img/social/instagram-white.svg" alt="Instagram">
      </a>
      <a href="https://www.tiktok.com/@terratek.solutions?_t=ZS-908dqCarCYH&_r=1" target="_blank" rel="noopener" aria-label="TikTok">
        <img src="assets/img/social/tiktok-white.svg" alt="TikTok">
      </a>
    </div>


    <div class="map">
        <iframe 
        src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d967.8608247973257!2d-94.51520673028195!3d16.33747099469251!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMTbCsDIwJzE0LjkiTiA5NMKwMzAnNTMuMiJX!5e0!3m2!1ses!2smx!4v1695951234567!5m2!1ses!2smx"
        width="100%" 
        height="300" 
        style="border:0; border-radius: var(--radius);" 
        allowfullscreen="" 
        loading="lazy" 
        referrerpolicy="no-referrer-when-downgrade">
        </iframe>
    </div>
    </aside>

    </div>
  </main>

  <footer role="contentinfo">
    <div class="container copy">
      <p>&copy; 2025 Terratek Solutions. Todos los derechos reservados.</p>
    </div>
  </footer>

  <script src="assets/js/main.js"></script>
  <script src="assets/js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('contact-form');
      const submitBtn = document.getElementById('submit-btn');
      const btnText = document.getElementById('btn-text');
      const btnLoading = document.getElementById('btn-loading');
      const messagesDiv = document.getElementById('form-messages');
      
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Validar campos requeridos
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const message = document.getElementById('message').value.trim();
        
        if (!name || !email || !message) {
          showMessage('Por favor, completa todos los campos obligatorios.', 'error');
          return;
        }
        
        // Validar email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          showMessage('Por favor, ingresa un email v√°lido.', 'error');
          return;
        }
        
        // Mostrar estado de carga
        submitBtn.disabled = true;
        btnText.style.display = 'none';
        btnLoading.style.display = 'inline';
        
        // Preparar datos del formulario
        const formData = new FormData(form);
        
        // Agregar campos adicionales para Formspree
        formData.append('_replyto', email);
        formData.append('_subject', `Nuevo contacto de ${name} - Terratek Solutions`);
        
        console.log('Sending form data:', Object.fromEntries(formData));
        
        // Enviar con fetch para evitar la ventana emergente
        fetch(form.action, {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        })
        .then(response => {
          console.log('Response status:', response.status);
          console.log('Response ok:', response.ok);
          
          if (response.ok) {
            showMessage('¬°Mensaje enviado exitosamente! Nos pondremos en contacto contigo pronto.', 'success');
            form.reset();
            return;
          }
          
          // Intentar obtener m√°s informaci√≥n del error
          return response.json().then(data => {
            console.log('Error data:', data);
            if (data.errors && Array.isArray(data.errors)) {
              throw new Error(data.errors.map(error => error.message).join(', '));
            } else if (data.error) {
              throw new Error(data.error);
            } else {
              throw new Error(`Error ${response.status}: ${response.statusText}`);
            }
          }).catch(jsonError => {
            // Si no se puede parsear el JSON, usar el status de la respuesta
            throw new Error(`Error ${response.status}: ${response.statusText}`);
          });
        })
        .catch(error => {
          console.error('Fetch error:', error);
          
          // Mostrar diferentes mensajes seg√∫n el tipo de error
          let errorMessage = 'Hubo un problema al enviar tu mensaje. ';
          
          if (error.message.includes('NetworkError') || error.message.includes('Failed to fetch')) {
            errorMessage += 'Verifica tu conexi√≥n a internet e intenta de nuevo.';
          } else if (error.message.includes('400')) {
            errorMessage += 'Los datos del formulario no son v√°lidos. Verifica la informaci√≥n e intenta de nuevo.';
          } else if (error.message.includes('429')) {
            errorMessage += 'Has enviado muchos mensajes. Espera un momento antes de intentar de nuevo.';
          } else if (error.message.includes('500')) {
            errorMessage += 'Error del servidor. Intenta de nuevo en unos minutos.';
          } else {
            errorMessage += 'Por favor, intenta de nuevo o cont√°ctanos directamente por WhatsApp.';
          }
          
          showMessage(errorMessage, 'error');
          
          // Ofrecer alternativa de WhatsApp con los datos del formulario
          setTimeout(() => {
            const confirmWhatsApp = confirm('¬øTe gustar√≠a enviar tu mensaje por WhatsApp en su lugar?');
            if (confirmWhatsApp) {
              sendViaWhatsApp(name, email, message);
            }
          }, 3000);
        })
        .finally(() => {
          // Restaurar bot√≥n
          submitBtn.disabled = false;
          btnText.style.display = 'inline';
          btnLoading.style.display = 'none';
        });
      });
      
      function showMessage(message, type) {
        messagesDiv.innerHTML = `<div class="alert alert-${type}" style="padding: 15px; margin-bottom: 20px; border-radius: 5px; ${type === 'success' ? 'background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;' : 'background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;'}">${message}</div>`;
        messagesDiv.scrollIntoView({ behavior: 'smooth' });
      }
      
      function sendViaWhatsApp(name, email, message) {
        const phone = document.getElementById('phone').value;
        const service = document.getElementById('service').value;
        const hectares = document.getElementById('hectares').value;
        
        let whatsappMessage = `Hola, soy ${name} y me interesa contactar con Terratek Solutions.%0A%0A`;
        whatsappMessage += `üìß Email: ${email}%0A`;
        if (phone) whatsappMessage += `üìû Tel√©fono: ${phone}%0A`;
        if (service) whatsappMessage += `üöÅ Servicio de inter√©s: ${service}%0A`;
        if (hectares) whatsappMessage += `üåæ Hect√°reas: ${hectares}%0A`;
        whatsappMessage += `%0Aüí¨ Mensaje:%0A${message}`;
        
        const whatsappUrl = `https://wa.me/5219602383601?text=${whatsappMessage}`;
        window.open(whatsappUrl, '_blank');
      }
    });
  </script>
</body>
</html>